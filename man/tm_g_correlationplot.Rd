% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tm_g_correlationplot.R
\name{tm_g_correlationplot}
\alias{tm_g_correlationplot}
\title{Correlation Plot}
\usage{
tm_g_correlationplot(label, dataname, param_var,
  xaxis_param = xaxis_param, xaxis_param_choices = xaxis_param,
  xaxis_var = xaxis_var, xaxis_var_choices = xaxis_var,
  yaxis_param = yaxis_param, yaxis_param_choices = yaxis_param,
  yaxis_var = yaxis_var, yaxis_var_choices = yaxis_var,
  trt_group = "ARM", color_manual = NULL, shape_manual = NULL,
  facet_ncol = 2, facet = FALSE, facet_var = "ARM",
  reg_line = FALSE, rotate_xlab = FALSE, hline = NULL,
  vline = NULL, plot_height = c(500, 200, 2000), font_size = c(12, 8,
  20), dot_size = c(1, 1, 12), reg_text_size = c(3, 3, 10),
  pre_output = NULL, post_output = NULL, code_data_processing = NULL)
}
\arguments{
\item{label}{menu item label of the module in the teal app.}

\item{dataname}{analysis data passed to the data argument of teal init. E.g. ADaM structured 
laboratory data frame ALB.}

\item{param_var}{name of variable containing biomarker codes e.g. PARAMCD.}

\item{xaxis_param}{biomarker selected.}

\item{xaxis_param_choices}{list of biomarkers of interest.}

\item{xaxis_var}{name of variable containing biomarker results displayed on x-axis e.g. BASE.}

\item{xaxis_var_choices}{list of variables containing biomarker results choices.}

\item{yaxis_param}{biomarker selected.}

\item{yaxis_param_choices}{list of biomarkers of interest.}

\item{yaxis_var}{name of variable containing biomarker results displayed on y-axis e.g. AVAL.}

\item{yaxis_var_choices}{list of variables containing biomarker results choices.}

\item{trt_group}{name of variable representing treatment group e.g. ARM.}

\item{color_manual}{vector of colors applied to treatment values.}

\item{shape_manual}{vector of symbols applied to LOQ values.}

\item{facet_ncol}{numeric value indicating number of facets per row.}

\item{facet}{set layout to use treatment facetting.}

\item{facet_var}{variable to use for treatment facetting.}

\item{reg_line}{include regression line and annotations for slope and coefficient in 
visualization. Use with facet TRUE.}

\item{rotate_xlab}{45 degree rotation of x-axis values.}

\item{hline}{y-axis value to position of horizontal line.}

\item{vline}{x-axis value to position a vertical line.}

\item{plot_height}{controls plot height.}

\item{font_size}{font size control for title, x-axis label, y-axis label and legend.}

\item{dot_size}{plot dot size.}

\item{reg_text_size}{font size control for regression line annotations.}

\item{pre_output}{optional, \code{shiny.tag} with text placed before the
output to put the output into context. For example the
\code{\link[shiny]{helpText}} elements are useful.}

\item{post_output}{optional, \code{shiny.tag} with text placed before the
output to put the output into context. For example the
\code{\link[shiny]{helpText}} elements are useful.}

\item{code_data_processing}{TODO}
}
\description{
This teal module renders the UI and calls the function that creates a correlation plot.
}
\details{
This module displays a correlation plot.
}
\examples{

\dontrun{

# Example using ADaM structure analysis dataset.

library(dplyr)
library(ggplot2)
library(goshawk)
library(random.cdisc.data)
library(stringr)
library(teal)
library(teal.goshawk)

# original ARM value = dose value
arm_mapping <- list("A: Drug X" = "150mg QD", "B: Placebo" = "Placebo", 
"C: Combination" = "Combination")
color_manual <-  c("150mg QD" = "#000000", "Placebo" = "#3498DB", "Combination" = "#E74C3C")
# assign LOQ flag symbols: circles for "N" and triangles for "Y", squares for "NA"
shape_manual <-  c("N"  = 1, "Y"  = 2, "NA" = 0)

ASL <- radsl(N = 20, seed = 1)
ALB <- radlb(ASL, visit_format = "WEEK", n_assessments = 7, seed = 2)
ALB <- ALB \%>\% 
mutate(AVISITCD = case_when(
AVISIT == "SCREENING" ~ "SCR",
AVISIT == "BASELINE" ~ "BL", grepl("WEEK", AVISIT) ~ paste("W",trimws(substr(AVISIT, start=6, 
stop=str_locate(AVISIT, "DAY")-1))),
TRUE ~ as.character(NA))) \%>\%
mutate(AVISITCDN = case_when(AVISITCD == "SCR" ~ -2,
AVISITCD == "BL" ~ 0, grepl("W", AVISITCD) ~ as.numeric(gsub("\\\\D+", "", AVISITCD)), 
TRUE ~ as.numeric(NA))) \%>\%
# use ARMCD values to order treatment in visualization legend
mutate(TRTORD = ifelse(grepl("C", ARMCD), 1,
ifelse(grepl("B", ARMCD), 2,
ifelse(grepl("A", ARMCD), 3, NA)))) \%>\%
mutate(ARM = as.character(arm_mapping[match(ARM, names(arm_mapping))])) \%>\%
mutate(ARM = factor(ARM) \%>\% reorder(TRTORD))

param_choices = c("ALT", "CRP", "IGA")

x <- teal::init(
  data = list(ASL = ASL, ALB = ALB),
  modules = root_modules(
    tm_g_correlationplot(
       label = "Correlation Plot",
       dataname = "ALB",
       param_var = "PARAMCD",
       xaxis_param_choices = param_choices,
       xaxis_param = param_choices[1],
       xaxis_var = "BASE",
       xaxis_var_choices = c("AVAL", "BASE", "CHG", "PCHG", "BASE2", "AVALL2"),
       yaxis_param_choices = param_choices,
       yaxis_param = param_choices[2],
       yaxis_var = "AVAL",
       yaxis_var_choices = c("AVAL", "BASE", "CHG", "PCHG", "BASE2", "AVALL2"),
       trt_group = "ARM",
       color_manual = color_manual,
       shape_manual = shape_manual,
       plot_height = c(500, 200, 2000),
       facet_ncol = 2,
       facet = FALSE,
       facet_var = "ARM",
       reg_line = FALSE,
       font_size = c(12, 8, 20),
       dot_size = c(1, 1, 12),
       reg_text_size = c(3, 3, 10)
   )
  )
)

shinyApp(x$ui, x$server)

}
}
\author{
Nick Paszty (npaszty) paszty.nicholas@gene.com

Balazs Toth (tothb2)  toth.balazs@gene.com
}
