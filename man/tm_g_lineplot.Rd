% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tm_g_lineplot.R
\name{tm_g_lineplot}
\alias{tm_g_lineplot}
\title{Line plot}
\usage{
tm_g_lineplot(
  label,
  dataname,
  adslname = NULL,
  param_var,
  param_choices = param,
  param,
  param_var_label = "PARAM",
  xvar,
  yvar,
  xvar_choices = xvar,
  yvar_choices = yvar,
  xvar_level = NULL,
  filter_var = yvar,
  filter_var_choices = filter_var,
  trt_group,
  trt_group_level = NULL,
  shape_choices = NULL,
  stat = "mean",
  hline = NULL,
  man_color = NULL,
  xtick = waiver(),
  xlabel = xtick,
  rotate_xlab = FALSE,
  plot_height = c(600, 200, 2000),
  font_size = c(12, 8, 20),
  dodge = c(0.4, 0, 1)
)
}
\arguments{
\item{label}{menu item label of the module in the teal app.}

\item{dataname}{analysis data passed to the data argument of teal init. E.g. ADaM structured 
laboratory data frame ADLB.}

\item{adslname}{Name of ADSL data set from which additional variables will be used for 
shape_choices}

\item{param_var}{name of variable containing biomarker codes e.g. PARAMCD.}

\item{param_choices}{list of biomarkers of interest.}

\item{param}{biomarker selected.}

\item{param_var_label}{single name of variable in analysis data that includes parameter labels.}

\item{xvar}{single name of variable in analysis data that is used as x-axis in the plot for the 
respective goshawk function.}

\item{yvar}{single name of variable in analysis data that is used as summary variable in the 
respective gshawk function.}

\item{xvar_choices}{vector with variable names that can be used as xvar.}

\item{yvar_choices}{vector with variable names that can be used as yvar.}

\item{xvar_level}{vector that can be used to define the factor level of xvar. Only use it when 
xvar is character or factor.}

\item{filter_var}{data constraint variable.}

\item{filter_var_choices}{data constraint variable choices.}

\item{trt_group}{name of variable representing treatment group e.g. ARM.}

\item{trt_group_level}{vector that can be used to define factor level of trt_group.}

\item{shape_choices}{Vector with names of ADSL variables which can be used to change shape}

\item{stat}{string of statistics}

\item{hline}{numeric value to add horizontal line to plot}

\item{man_color}{string vector representing customized colors}

\item{xtick}{numeric vector to define the tick values of x-axis when x variable is numeric. 
Default value is waive().}

\item{xlabel}{vector with same length of xtick to define the label of x-axis tick values. 
Default value is waive().}

\item{rotate_xlab}{boolean value indicating whether to rotate x-axis labels.}

\item{plot_height}{numeric vectors to define the plot height.}

\item{font_size}{control font size for title, x-axis, y-axis and legend font.}

\item{dodge}{control the position dodge of error bar}
}
\value{
\code{shiny} object
}
\description{
This teal module renders the UI and calls the function that creates a line plot.
}
\examples{

\dontrun{

# Example using ADaM structure analysis dataset.

library(random.cdisc.data)

# original ARM value = dose value
arm_mapping <- list("A: Drug X" = "150mg QD",
                    "B: Placebo" = "Placebo",
                    "C: Combination" = "Combination")

ADSL <- radsl(N = 20, seed = 1)
ADLB <- radlb(ADSL, visit_format = "WEEK", n_assessments = 7L, seed = 2)
ADLB <- ADLB %>%
  mutate(AVISITCD = case_when(
    AVISIT == "SCREENING" ~ "SCR",
    AVISIT == "BASELINE" ~ "BL",
    grepl("WEEK", AVISIT) ~ paste("W", stringr::str_extract(AVISIT, "(?<=(WEEK ))[0-9]+")),
    TRUE ~ as.character(NA)),
    AVISITCDN = case_when(
      AVISITCD == "SCR" ~ -2,
      AVISITCD == "BL" ~ 0,
      grepl("W", AVISITCD) ~ as.numeric(gsub("[^0-9]*", "", AVISITCD)),
      TRUE ~ as.numeric(NA)),
    TRTORD = case_when(
      ARMCD == "ARM C" ~ 1,
      ARMCD == "ARM B" ~ 2,
      ARMCD == "ARM A" ~ 3),
    ARM = as.character(arm_mapping[match(ARM, names(arm_mapping))]),
    ARM = factor(ARM) %>% reorder(TRTORD))


x <- teal::init(
  data = cdisc_data(
    cdisc_dataset("ADSL", ADSL),
    cdisc_dataset("ADLB", ADLB),
    code = {'
      arm_mapping <- list("A: Drug X" = "150mg QD",
                          "B: Placebo" = "Placebo",
                          "C: Combination" = "Combination")

      ADSL <- radsl(N = 20, seed = 1)
      ADLB <- radlb(ADSL, visit_format = "WEEK", n_assessments = 7L, seed = 2)
      ADLB <- ADLB %>%
        mutate(AVISITCD = case_when(
            AVISIT == "SCREENING" ~ "SCR",
            AVISIT == "BASELINE" ~ "BL",
            grepl("WEEK", AVISIT) ~ paste("W", stringr::str_extract(AVISIT, "(?<=(WEEK ))[0-9]+")),
            TRUE ~ as.character(NA)),
          AVISITCDN = case_when(
            AVISITCD == "SCR" ~ -2,
            AVISITCD == "BL" ~ 0,
            grepl("W", AVISITCD) ~ as.numeric(gsub("[^0-9]*", "", AVISITCD)),
            TRUE ~ as.numeric(NA)),
          TRTORD = case_when(
            ARMCD == "ARM C" ~ 1,
            ARMCD == "ARM B" ~ 2,
            ARMCD == "ARM A" ~ 3),
          ARM = as.character(arm_mapping[match(ARM, names(arm_mapping))]),
          ARM = factor(ARM) %>% reorder(TRTORD))
          '},
    check = FALSE
  ),
  modules = root_modules(
    tm_g_lineplot(
      label = "Line Plot",
      dataname = "ADLB",
      adslname = "ADSL",
      param_var = "PARAMCD",
      param_choices = c("CRP","IGG","IGM"),
      shape_choices = c("SEX", "RACE"),
      param = "CRP",
      xvar = "AVISITCD",
      yvar = "AVAL",
      yvar_choices = c("AVAL","CHG","PCGH"),
      filter_var = 'NONE',
      filter_var_choices = c("None" = "NONE", "Screening" = "BASE2", "Baseline" = "BASE"),
      trt_group = "ARM"
    )
  )
)

shinyApp(x$ui, x$server)
}
}
\author{
Wenyi Liu (luiw2) wenyi.liu@roche.com

Balazs Toth (tothb2) toth.balazs@gene.com
}
